
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Deep learning energy measurement and optimization">
      
      
        <meta name="author" content="Zeus team">
      
      
        <link rel="canonical" href="https://ml.energy/zeus/reference/optimizer/batch_size/server/services/service/">
      
      
        <link rel="prev" href="../commands/">
      
      
        <link rel="next" href="../../../../pipeline_frequency/">
      
      
      <link rel="icon" href="../../../../../../assets/img/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.19">
    
    
      
        <title>service - Zeus Project</title>
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../../../assets/css/custom.css">
    
      <link rel="stylesheet" href="../../../../../../assets/css/color.css">
    
    <script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-T3W21TQ7FJ"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-T3W21TQ7FJ",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-T3W21TQ7FJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="service - Zeus Project" >
      
        <meta  property="og:description"  content="Deep learning energy measurement and optimization" >
      
        <meta  property="og:image"  content="https://ml.energy/zeus/assets/img/social/reference/optimizer/batch_size/server/services/service.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://ml.energy/zeus/reference/optimizer/batch_size/server/services/service/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="service - Zeus Project" >
      
        <meta  name="twitter:description"  content="Deep learning energy measurement and optimization" >
      
        <meta  name="twitter:image"  content="https://ml.energy/zeus/assets/img/social/reference/optimizer/batch_size/server/services/service.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="zeus" data-md-color-accent="zeus">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#zeus.optimizer.batch_size.server.services.service" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
              </button>
            
            
We're sharing updates via <a href="https://buttondown.com/ml-energy">The ML.ENERGY Newsletter</a>!
&middot;
Join the Zeus
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 15a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2h2v2m1 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-5m2-8a2 2 0 0 1-2-2 2 2 0 0 1 2-2 2 2 0 0 1 2 2v2H9m0 1a2 2 0 0 1 2 2 2 2 0 0 1-2 2H4a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5m8 2a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2h-2v-2m-1 0a2 2 0 0 1-2 2 2 2 0 0 1-2-2V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5m-2 8a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2h2m0-1a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-5Z"></path></svg></span>
<a href="https://join.slack.com/t/zeus-ml/shared_invite/zt-36fl1m7qa-Ihky6FbfxLtobx40hMj3VA">Slack workspace</a>
to reach out to us.

          </div>
          
            <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../../.." title="Zeus Project" class="md-header__button md-logo" aria-label="Zeus Project" data-md-component="logo">
      
  <img src="../../../../../../assets/img/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zeus Project
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              service
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="zeus" data-md-color-accent="zeus"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ml-energy/zeus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ml-energy/zeus
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../.." class="md-tabs__link">
        
  
    
  
  Zeus

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../getting_started/" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../measure/" class="md-tabs__link">
        
  
    
  
  Measuring Energy

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../optimize/" class="md-tabs__link">
        
  
    
  
  Optimizing Energy

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../research_overview/" class="md-tabs__link">
        
  
    
  
  Research Overview

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../../" class="md-tabs__link">
          
  
  Source Code Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../.." title="Zeus Project" class="md-nav__button md-logo" aria-label="Zeus Project" data-md-component="logo">
      
  <img src="../../../../../../assets/img/logo.svg" alt="logo">

    </a>
    Zeus Project
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ml-energy/zeus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ml-energy/zeus
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zeus
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../measure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Measuring Energy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../../optimize/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Optimizing Energy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Optimizing Energy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../optimize/power_limit_optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power Limit Optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../optimize/batch_size_optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Batch Size Optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../optimize/pipeline_frequency_optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipeline Frequency Optimizer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../../research_overview/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Research Overview
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Research Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../research_overview/zeus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zeus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../research_overview/perseus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perseus
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Source Code Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Source Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Source Code Reference
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Source Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../_legacy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    _legacy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1" id="__nav_6_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1">
            <span class="md-nav__icon md-icon"></span>
            _legacy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../_legacy/job/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    job
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../_legacy/policy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    policy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_2" id="__nav_6_1_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_2">
            <span class="md-nav__icon md-icon"></span>
            policy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../_legacy/policy/interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../_legacy/policy/mab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../_legacy/policy/optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    optimizer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../_legacy/simulate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    simulate
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../callback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    callback
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../device/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    device
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3" id="__nav_6_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3">
            <span class="md-nav__icon md-icon"></span>
            device
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../device/cpu/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    cpu
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_2" id="__nav_6_1_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_2">
            <span class="md-nav__icon md-icon"></span>
            cpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/cpu/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/cpu/rapl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rapl
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/exception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exception
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../device/gpu/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    gpu
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_4" id="__nav_6_1_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_4">
            <span class="md-nav__icon md-icon"></span>
            gpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/gpu/amd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    amd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/gpu/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/gpu/nvidia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nvidia
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../device/soc/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    soc
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_5" id="__nav_6_1_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_5">
            <span class="md-nav__icon md-icon"></span>
            soc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/soc/apple/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apple
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/soc/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../device/soc/jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jetson
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../exception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exception
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../metric/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    metric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../monitor/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    monitor
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_6" id="__nav_6_1_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_6">
            <span class="md-nav__icon md-icon"></span>
            monitor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../monitor/carbon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    carbon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../monitor/energy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    energy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../monitor/power/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    power
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../monitor/power_streaming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    power_streaming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../monitor/price/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    price
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../monitor/temperature/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    temperature
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    optimizer
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7" id="__nav_6_1_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1_7">
            <span class="md-nav__icon md-icon"></span>
            optimizer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    batch_size
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1" id="__nav_6_1_7_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_7_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1_7_1">
            <span class="md-nav__icon md-icon"></span>
            batch_size
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    server
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4" id="__nav_6_1_7_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_7_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1_7_1_4">
            <span class="md-nav__icon md-icon"></span>
            server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../batch_size_state/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    batch_size_state
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4_1" id="__nav_6_1_7_1_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_7_1_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1_4_1">
            <span class="md-nav__icon md-icon"></span>
            batch_size_state
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../batch_size_state/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../batch_size_state/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../batch_size_state/repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../database/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    database
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4_3" id="__nav_6_1_7_1_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_7_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/db_connection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    db_connection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repository
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    explorer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../job/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    job
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4_6" id="__nav_6_1_7_1_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_7_1_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            job
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../job/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../job/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../job/repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4_10" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    services
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4_10" id="__nav_6_1_7_1_4_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_7_1_4_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_1_7_1_4_10">
            <span class="md-nav__icon md-icon"></span>
            services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    service
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    service
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service" class="md-nav__link">
    <span class="md-ellipsis">
      service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService" class="md-nav__link">
    <span class="md-ellipsis">
      ZeusService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZeusService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_arms" class="md-nav__link">
    <span class="md-ellipsis">
      get_arms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_arm" class="md-nav__link">
    <span class="md-ellipsis">
      get_arm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_explorations_of_job" class="md-nav__link">
    <span class="md-ellipsis">
      get_explorations_of_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.update_trial" class="md-nav__link">
    <span class="md-ellipsis">
      update_trial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.update_arm_state" class="md-nav__link">
    <span class="md-ellipsis">
      update_arm_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.update_exp_default_bs" class="md-nav__link">
    <span class="md-ellipsis">
      update_exp_default_bs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.create_trial" class="md-nav__link">
    <span class="md-ellipsis">
      create_trial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_random_choices" class="md-nav__link">
    <span class="md-ellipsis">
      get_random_choices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_normal" class="md-nav__link">
    <span class="md-ellipsis">
      get_normal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_job" class="md-nav__link">
    <span class="md-ellipsis">
      get_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_trial" class="md-nav__link">
    <span class="md-ellipsis">
      get_trial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.create_job" class="md-nav__link">
    <span class="md-ellipsis">
      create_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_trial_results_of_bs" class="md-nav__link">
    <span class="md-ellipsis">
      get_trial_results_of_bs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.create_arms" class="md-nav__link">
    <span class="md-ellipsis">
      create_arms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.update_job_stage" class="md-nav__link">
    <span class="md-ellipsis">
      update_job_stage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.delete_job" class="md-nav__link">
    <span class="md-ellipsis">
      delete_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService._get_generator" class="md-nav__link">
    <span class="md-ellipsis">
      _get_generator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService._get_job" class="md-nav__link">
    <span class="md-ellipsis">
      _get_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService._get_trial" class="md-nav__link">
    <span class="md-ellipsis">
      _get_trial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService._check_job_fetched" class="md-nav__link">
    <span class="md-ellipsis">
      _check_job_fetched
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../pipeline_frequency/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    pipeline_frequency
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_2" id="__nav_6_1_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_2">
            <span class="md-nav__icon md-icon"></span>
            pipeline_frequency
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../pipeline_frequency/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../pipeline_frequency/frequency_controller/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    frequency_controller
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../pipeline_frequency/optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../pipeline_frequency/server/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    server
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_2_4" id="__nav_6_1_7_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_7_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_2_4">
            <span class="md-nav__icon md-icon"></span>
            server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../pipeline_frequency/server/job_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    job_manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../pipeline_frequency/server/router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../pipeline_frequency/server/scheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scheduler
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../power_limit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    power_limit
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../show_env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    show_env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../utils/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    utils
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_9" id="__nav_6_1_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_9">
            <span class="md-nav__icon md-icon"></span>
            utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/async_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    async_utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/framework/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    framework
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/lat_lon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lat_lon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/lr_scaler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lr_scaler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/metric/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    metric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/multiprocessing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    multiprocessing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/pydantic_v1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_v1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../utils/zeusd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zeusd
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service" class="md-nav__link">
    <span class="md-ellipsis">
      service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService" class="md-nav__link">
    <span class="md-ellipsis">
      ZeusService
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ZeusService">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_arms" class="md-nav__link">
    <span class="md-ellipsis">
      get_arms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_arm" class="md-nav__link">
    <span class="md-ellipsis">
      get_arm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_explorations_of_job" class="md-nav__link">
    <span class="md-ellipsis">
      get_explorations_of_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.update_trial" class="md-nav__link">
    <span class="md-ellipsis">
      update_trial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.update_arm_state" class="md-nav__link">
    <span class="md-ellipsis">
      update_arm_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.update_exp_default_bs" class="md-nav__link">
    <span class="md-ellipsis">
      update_exp_default_bs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.create_trial" class="md-nav__link">
    <span class="md-ellipsis">
      create_trial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_random_choices" class="md-nav__link">
    <span class="md-ellipsis">
      get_random_choices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_normal" class="md-nav__link">
    <span class="md-ellipsis">
      get_normal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_job" class="md-nav__link">
    <span class="md-ellipsis">
      get_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_trial" class="md-nav__link">
    <span class="md-ellipsis">
      get_trial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.create_job" class="md-nav__link">
    <span class="md-ellipsis">
      create_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.get_trial_results_of_bs" class="md-nav__link">
    <span class="md-ellipsis">
      get_trial_results_of_bs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.create_arms" class="md-nav__link">
    <span class="md-ellipsis">
      create_arms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.update_job_stage" class="md-nav__link">
    <span class="md-ellipsis">
      update_job_stage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService.delete_job" class="md-nav__link">
    <span class="md-ellipsis">
      delete_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService._get_generator" class="md-nav__link">
    <span class="md-ellipsis">
      _get_generator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService._get_job" class="md-nav__link">
    <span class="md-ellipsis">
      _get_job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService._get_trial" class="md-nav__link">
    <span class="md-ellipsis">
      _get_trial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zeus.optimizer.batch_size.server.services.service.ZeusService._check_job_fetched" class="md-nav__link">
    <span class="md-ellipsis">
      _check_job_fetched
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>service</h1>

<div class="doc doc-object doc-module">



<h2 id="zeus.optimizer.batch_size.server.services.service" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">zeus.optimizer.batch_size.server.services.service</span>


</h2>

    <div class="doc doc-contents first">

        <p>Zeus batch size optimizer service layer.</p>










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="zeus.optimizer.batch_size.server.services.service.ZeusService" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ZeusService</span>


</h3>


    <div class="doc doc-contents ">


        <p>Zeus Service that interacts with database using repository.</p>
<p>Provides application layer methods to communicate with database.
Each method is one or more number of db operations that have to be done at the same time.</p>








              <details class="quote">
                <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ZeusService</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Zeus Service that interacts with database using repository.</span>

<span class="sd">    Provides application layer methods to communicate with database.</span>
<span class="sd">    Each method is one or more number of db operations that have to be done at the same time.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_session</span><span class="p">:</span> <span class="n">AsyncSession</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set up repositories to use to talk to database.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span> <span class="o">=</span> <span class="n">BatchSizeStateRepository</span><span class="p">(</span><span class="n">db_session</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span> <span class="o">=</span> <span class="n">JobStateRepository</span><span class="p">(</span><span class="n">db_session</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_arms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">GaussianTsArmState</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get GaussianTs arm states for all arms(job_id, batch size).</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id: Job id</span>

<span class="sd">        Returns:</span>
<span class="sd">            list of arms</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_arms</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_arm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bs</span><span class="p">:</span> <span class="n">BatchSizeBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GaussianTsArmState</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get arm state for one arm.</span>

<span class="sd">        Args:</span>
<span class="sd">            bs: (job_id, batch size) pair that represents one arm</span>

<span class="sd">        Returns:</span>
<span class="sd">            Result arm state or None if we cannot find that arm</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_arm</span><span class="p">(</span><span class="n">bs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_explorations_of_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExplorationsPerJob</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all explorations we have done for that job.</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id: Job id</span>

<span class="sd">        Returns:</span>
<span class="sd">            list of explorations per each batch size</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_explorations_of_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">updated_trial</span><span class="p">:</span> <span class="n">UpdateTrial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update trial.</span>

<span class="sd">        (1) update the corresponding trial.</span>
<span class="sd">        (2) we update the min training cost observed so far if we have to.</span>

<span class="sd">        Args:</span>
<span class="sd">            updated_trial: Result of training that batch size</span>

<span class="sd">        Raises:</span>
<span class="sd">            [`ZeusBSOServiceBadOperationError`][zeus.optimizer.batch_size.server.exceptions.ZeusBSOServiceBadOperationError]: When we didn&#39;t fetch the job or trial during this session. This operation should have</span>
<span class="sd">                    fetched the job and trial first. Also, check if trial type is matching with fetched trial&#39;s type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">trial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_trial</span><span class="p">(</span>
            <span class="n">ReadTrial</span><span class="p">(</span>
                <span class="n">job_id</span><span class="o">=</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                <span class="n">batch_size</span><span class="o">=</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span>
                <span class="n">trial_number</span><span class="o">=</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">trial_number</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">TrialStatus</span><span class="o">.</span><span class="n">Dispatched</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span><span class="s2">&quot;Trial already has a result.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">updated_current_trial</span><span class="p">(</span><span class="n">updated_trial</span><span class="p">)</span>

        <span class="c1"># Update the corresponding batch size&#39;s min cost if needed.</span>
        <span class="k">if</span> <span class="n">updated_trial</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">TrialStatus</span><span class="o">.</span><span class="n">Failed</span><span class="p">:</span>
            <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_job</span><span class="p">(</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">updated_trial</span><span class="o">.</span><span class="n">energy</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">updated_trial</span><span class="o">.</span><span class="n">time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ZeusBSOValueError</span><span class="p">(</span><span class="s2">&quot;Energy and time should be set if the trial is not failed.&quot;</span><span class="p">)</span>
            <span class="n">cur_cost</span> <span class="o">=</span> <span class="n">zeus_cost</span><span class="p">(</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="n">updated_trial</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">job</span><span class="o">.</span><span class="n">eta_knob</span><span class="p">,</span> <span class="n">job</span><span class="o">.</span><span class="n">max_power</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">job</span><span class="o">.</span><span class="n">min_cost</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">job</span><span class="o">.</span><span class="n">min_cost</span> <span class="o">&gt;</span> <span class="n">cur_cost</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_min</span><span class="p">(</span>
                    <span class="n">UpdateJobMinCost</span><span class="p">(</span>
                        <span class="n">job_id</span><span class="o">=</span><span class="n">job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                        <span class="n">min_cost</span><span class="o">=</span><span class="n">cur_cost</span><span class="p">,</span>
                        <span class="n">min_cost_batch_size</span><span class="o">=</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_arm_state</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">arm</span><span class="p">:</span> <span class="n">UpdateArm</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update arm state.</span>

<span class="sd">        Args:</span>
<span class="sd">            arm: Updated arm state.</span>

<span class="sd">        Raises:</span>
<span class="sd">            `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job or trial during this session. This operation should have</span>
<span class="sd">                    fetched the job and trial first. Also, check if trial type is matching with fetched trial&#39;s type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">arm</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="n">trial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_trial</span><span class="p">(</span>
            <span class="n">ReadTrial</span><span class="p">(</span>
                <span class="n">job_id</span><span class="o">=</span><span class="n">arm</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                <span class="n">batch_size</span><span class="o">=</span><span class="n">arm</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span>
                <span class="n">trial_number</span><span class="o">=</span><span class="n">arm</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">trial_number</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">TrialType</span><span class="o">.</span><span class="n">MAB</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span><span class="s2">&quot;Cannot update an arm since this trial is not issued from MAB stage.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">update_arm_state</span><span class="p">(</span><span class="n">arm</span><span class="o">.</span><span class="n">updated_arm</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_exp_default_bs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">updated_default_bs</span><span class="p">:</span> <span class="n">UpdateExpDefaultBs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the default batch size for exploration.</span>

<span class="sd">        Args:</span>
<span class="sd">            updated_default_bs: Job Id and new default batch size</span>

<span class="sd">        Raises:</span>
<span class="sd">            `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                    fetched the job first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">updated_default_bs</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_exp_default_bs</span><span class="p">(</span><span class="n">updated_default_bs</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trial</span><span class="p">:</span> <span class="n">CreateExplorationTrial</span> <span class="o">|</span> <span class="n">CreateMabTrial</span> <span class="o">|</span> <span class="n">CreateConcurrentTrial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ReadTrial</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new trial.</span>

<span class="sd">        Args:</span>
<span class="sd">            trial: New trial to create.</span>

<span class="sd">        Raises:</span>
<span class="sd">            `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                    fetched the job first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="n">trial_number</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_next_trial_number</span><span class="p">(</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">create_trial</span><span class="p">(</span><span class="n">CreateTrial</span><span class="p">(</span><span class="o">**</span><span class="n">trial</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span> <span class="n">trial_number</span><span class="o">=</span><span class="n">trial_number</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ReadTrial</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">trial</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span> <span class="n">trial_number</span><span class="o">=</span><span class="n">trial_number</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_random_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choice</span><span class="p">:</span> <span class="n">GetRandomChoices</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get randome choices based on job&#39;s seed.</span>

<span class="sd">        If seed is not None (set by the user) we get the random choices from the generator that is stored in the database.</span>
<span class="sd">        Otherwise, we get random choices based on random seed.</span>

<span class="sd">        Args:</span>
<span class="sd">            choice: Job id and list of choices</span>

<span class="sd">        Returns:</span>
<span class="sd">            reuslt random choices</span>

<span class="sd">        Raises:</span>
<span class="sd">            `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                    fetched the job first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">choice</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span>
        <span class="n">rng</span><span class="p">,</span> <span class="n">should_update</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_generator</span><span class="p">(</span><span class="n">choice</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">),</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">should_update</span><span class="p">:</span>
            <span class="c1"># If we used the generator from database, should update the generator state after using it</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_generator_state</span><span class="p">(</span>
                <span class="n">UpdateGeneratorState</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">choice</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()))</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="n">GetNormal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sample from normal distribution and update the generator state if seed was set.</span>

<span class="sd">        Args:</span>
<span class="sd">            arg: args for `numpy.random.normal`, which is loc(mean of distribution) and scale(stdev of distribution)</span>

<span class="sd">        Returns:</span>
<span class="sd">            Drawn sample.</span>

<span class="sd">        Raises:</span>
<span class="sd">            `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                    fetched the job first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rng</span><span class="p">,</span> <span class="n">should_update</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_generator</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span> <span class="n">arg</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">should_update</span><span class="p">:</span>
            <span class="c1"># If we used the generator from database, should update the generator state after using it</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_generator_state</span><span class="p">(</span>
                <span class="n">UpdateGeneratorState</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">arg</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()))</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">res</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JobState</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get job from database.</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id: Job Id</span>

<span class="sd">        Returns:</span>
<span class="sd">            JobState if we found one, None if we couldn&#39;t find a job matching the job id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">get_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trial</span><span class="p">:</span> <span class="n">ReadTrial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Trial</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a trial from database.</span>

<span class="sd">        Args:</span>
<span class="sd">            trial: (Job Id, batch size, trial_number) triplet.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Trial if we found one, None if we couldn&#39;t find a job matching trial.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_trial</span><span class="p">(</span><span class="n">trial</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_job</span><span class="p">:</span> <span class="n">CreateJob</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new job.</span>

<span class="sd">        Args:</span>
<span class="sd">            new_job: Configuration of a new job</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span><span class="n">new_job</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_trial_results_of_bs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bs</span><span class="p">:</span> <span class="n">BatchSizeBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TrialResultsPerBs</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load window size amount of results for a given batch size. If window size &lt;= 0, load all of them.</span>

<span class="sd">        Args:</span>
<span class="sd">            bs: (job_id, batch size) pair.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list of windowed measurements in descending order for that (job_id, batch size)</span>

<span class="sd">        Raises:</span>
<span class="sd">            `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                    fetched the job first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_job</span><span class="p">(</span><span class="n">bs</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_trial_results_of_bs</span><span class="p">(</span>
            <span class="n">BatchSizeBase</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">bs</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">bs</span><span class="o">.</span><span class="n">batch_size</span><span class="p">),</span>
            <span class="n">job</span><span class="o">.</span><span class="n">window_size</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_arms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_arms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">GaussianTsArmState</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create GuassianTs arms for the job.</span>

<span class="sd">        Args:</span>
<span class="sd">            new_arms: List of new arm states</span>

<span class="sd">        Raises:</span>
<span class="sd">            `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                    fetched the job first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_arms</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">new_arms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">create_arms</span><span class="p">(</span><span class="n">new_arms</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_job_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">updated_stage</span><span class="p">:</span> <span class="n">UpdateJobStage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the job stage (Pruning -&gt; MAB).</span>

<span class="sd">        Args:</span>
<span class="sd">            updated_stage: Updated stage.</span>

<span class="sd">        Raises:</span>
<span class="sd">            `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                    fetched the job first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">updated_stage</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_stage</span><span class="p">(</span><span class="n">updated_stage</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the job.</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id: ID of the job.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the job is deleted. False if none was deleted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">delete_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">np_Generator</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get generator based on job_id. If mab_seed is not none, we should update the state after using generator.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple of [Generator, if we should update state]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">job_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>

        <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()))</span>

        <span class="n">should_update</span> <span class="o">=</span> <span class="n">job_state</span><span class="o">.</span><span class="n">mab_seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">job_state</span><span class="o">.</span><span class="n">mab_seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">job_state</span><span class="o">.</span><span class="n">mab_random_generator_state</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ZeusBSOValueError</span><span class="p">(</span><span class="s2">&quot;Seed is set but generator state is none. Should be impossible&quot;</span><span class="p">)</span>

            <span class="n">state</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">job_state</span><span class="o">.</span><span class="n">mab_random_generator_state</span><span class="p">)</span>
            <span class="n">rng</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">rng</span><span class="p">,</span> <span class="n">should_update</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JobState</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the job from the session. If we couldn&#39;t find the job, raise a `ZeusBSOServiceBadOperationError`.&quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">get_job_from_session</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Should have fetched the job first or job does not exist(job_id = </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trial</span><span class="p">:</span> <span class="n">ReadTrial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Trial</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the job from the session. If we couldn&#39;t find the trial, raise a `ZeusBSOServiceBadOperationError`.&quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_trial_from_session</span><span class="p">(</span><span class="n">trial</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Should have fetched the trial first or trial does not exist(trial = </span><span class="si">{</span><span class="n">trial</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_job_fetched</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if we fetched the job in the current session. If we didn&#39;t raise a `ZeusBSOServiceBadOperationError`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">check_job_fetched</span><span class="p">(</span><span class="n">job_id</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;check_job_fetched: </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> is not currently in the session&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span><span class="n">db_session</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_session</span><span class="p">:</span> <span class="n">AsyncSession</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set up repositories to use to talk to database.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span> <span class="o">=</span> <span class="n">BatchSizeStateRepository</span><span class="p">(</span><span class="n">db_session</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span> <span class="o">=</span> <span class="n">JobStateRepository</span><span class="p">(</span><span class="n">db_session</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.get_arms" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_arms</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_arms</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get GaussianTs arm states for all arms(job_id, batch size).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>job_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Job id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GaussianTsArmState&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.models.GaussianTsArmState&lt;/code&gt;)" href="../../batch_size_state/models/#zeus.optimizer.batch_size.server.batch_size_state.models.GaussianTsArmState">GaussianTsArmState</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of arms</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_arms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">GaussianTsArmState</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get GaussianTs arm states for all arms(job_id, batch size).</span>

<span class="sd">    Args:</span>
<span class="sd">        job_id: Job id</span>

<span class="sd">    Returns:</span>
<span class="sd">        list of arms</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_arms</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.get_arm" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_arm</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_arm</span><span class="p">(</span><span class="n">bs</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get arm state for one arm.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;BatchSizeBase&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.models.BatchSizeBase&lt;/code&gt;)" href="../../batch_size_state/models/#zeus.optimizer.batch_size.server.batch_size_state.models.BatchSizeBase">BatchSizeBase</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(job_id, batch size) pair that represents one arm</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GaussianTsArmState&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.models.GaussianTsArmState&lt;/code&gt;)" href="../../batch_size_state/models/#zeus.optimizer.batch_size.server.batch_size_state.models.GaussianTsArmState">GaussianTsArmState</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Result arm state or None if we cannot find that arm</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_arm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bs</span><span class="p">:</span> <span class="n">BatchSizeBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GaussianTsArmState</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get arm state for one arm.</span>

<span class="sd">    Args:</span>
<span class="sd">        bs: (job_id, batch size) pair that represents one arm</span>

<span class="sd">    Returns:</span>
<span class="sd">        Result arm state or None if we cannot find that arm</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_arm</span><span class="p">(</span><span class="n">bs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.get_explorations_of_job" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_explorations_of_job</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_explorations_of_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get all explorations we have done for that job.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>job_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Job id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ExplorationsPerJob&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.models.ExplorationsPerJob&lt;/code&gt;)" href="../../batch_size_state/models/#zeus.optimizer.batch_size.server.batch_size_state.models.ExplorationsPerJob">ExplorationsPerJob</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of explorations per each batch size</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_explorations_of_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExplorationsPerJob</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all explorations we have done for that job.</span>

<span class="sd">    Args:</span>
<span class="sd">        job_id: Job id</span>

<span class="sd">    Returns:</span>
<span class="sd">        list of explorations per each batch size</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_explorations_of_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.update_trial" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">update_trial</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">update_trial</span><span class="p">(</span><span class="n">updated_trial</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Update trial.</p>
<p>(1) update the corresponding trial.
(2) we update the min training cost observed so far if we have to.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>updated_trial</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;UpdateTrial&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.commands.UpdateTrial&lt;/code&gt;)" href="../../batch_size_state/commands/#zeus.optimizer.batch_size.server.batch_size_state.commands.UpdateTrial">UpdateTrial</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Result of training that batch size</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>[`ZeusBSOServiceBadOperationError`][zeus.optimizer.batch_size.server.exceptions.ZeusBSOServiceBadOperationError]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job or trial during this session. This operation should have
    fetched the job and trial first. Also, check if trial type is matching with fetched trial's type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">updated_trial</span><span class="p">:</span> <span class="n">UpdateTrial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update trial.</span>

<span class="sd">    (1) update the corresponding trial.</span>
<span class="sd">    (2) we update the min training cost observed so far if we have to.</span>

<span class="sd">    Args:</span>
<span class="sd">        updated_trial: Result of training that batch size</span>

<span class="sd">    Raises:</span>
<span class="sd">        [`ZeusBSOServiceBadOperationError`][zeus.optimizer.batch_size.server.exceptions.ZeusBSOServiceBadOperationError]: When we didn&#39;t fetch the job or trial during this session. This operation should have</span>
<span class="sd">                fetched the job and trial first. Also, check if trial type is matching with fetched trial&#39;s type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">trial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_trial</span><span class="p">(</span>
        <span class="n">ReadTrial</span><span class="p">(</span>
            <span class="n">job_id</span><span class="o">=</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
            <span class="n">batch_size</span><span class="o">=</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span>
            <span class="n">trial_number</span><span class="o">=</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">trial_number</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">TrialStatus</span><span class="o">.</span><span class="n">Dispatched</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span><span class="s2">&quot;Trial already has a result.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">updated_current_trial</span><span class="p">(</span><span class="n">updated_trial</span><span class="p">)</span>

    <span class="c1"># Update the corresponding batch size&#39;s min cost if needed.</span>
    <span class="k">if</span> <span class="n">updated_trial</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">TrialStatus</span><span class="o">.</span><span class="n">Failed</span><span class="p">:</span>
        <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_job</span><span class="p">(</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">updated_trial</span><span class="o">.</span><span class="n">energy</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">updated_trial</span><span class="o">.</span><span class="n">time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ZeusBSOValueError</span><span class="p">(</span><span class="s2">&quot;Energy and time should be set if the trial is not failed.&quot;</span><span class="p">)</span>
        <span class="n">cur_cost</span> <span class="o">=</span> <span class="n">zeus_cost</span><span class="p">(</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="n">updated_trial</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">job</span><span class="o">.</span><span class="n">eta_knob</span><span class="p">,</span> <span class="n">job</span><span class="o">.</span><span class="n">max_power</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">job</span><span class="o">.</span><span class="n">min_cost</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">job</span><span class="o">.</span><span class="n">min_cost</span> <span class="o">&gt;</span> <span class="n">cur_cost</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_min</span><span class="p">(</span>
                <span class="n">UpdateJobMinCost</span><span class="p">(</span>
                    <span class="n">job_id</span><span class="o">=</span><span class="n">job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                    <span class="n">min_cost</span><span class="o">=</span><span class="n">cur_cost</span><span class="p">,</span>
                    <span class="n">min_cost_batch_size</span><span class="o">=</span><span class="n">updated_trial</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.update_arm_state" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">update_arm_state</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">update_arm_state</span><span class="p">(</span><span class="n">arm</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Update arm state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>arm</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;UpdateArm&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.services.commands.UpdateArm&lt;/code&gt;)" href="../commands/#zeus.optimizer.batch_size.server.services.commands.UpdateArm">UpdateArm</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated arm state.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>`ZeusBSOServiceBadOperationError`</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job or trial during this session. This operation should have
    fetched the job and trial first. Also, check if trial type is matching with fetched trial's type.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_arm_state</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">arm</span><span class="p">:</span> <span class="n">UpdateArm</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update arm state.</span>

<span class="sd">    Args:</span>
<span class="sd">        arm: Updated arm state.</span>

<span class="sd">    Raises:</span>
<span class="sd">        `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job or trial during this session. This operation should have</span>
<span class="sd">                fetched the job and trial first. Also, check if trial type is matching with fetched trial&#39;s type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">arm</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
    <span class="n">trial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_trial</span><span class="p">(</span>
        <span class="n">ReadTrial</span><span class="p">(</span>
            <span class="n">job_id</span><span class="o">=</span><span class="n">arm</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
            <span class="n">batch_size</span><span class="o">=</span><span class="n">arm</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span>
            <span class="n">trial_number</span><span class="o">=</span><span class="n">arm</span><span class="o">.</span><span class="n">trial</span><span class="o">.</span><span class="n">trial_number</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">TrialType</span><span class="o">.</span><span class="n">MAB</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span><span class="s2">&quot;Cannot update an arm since this trial is not issued from MAB stage.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">update_arm_state</span><span class="p">(</span><span class="n">arm</span><span class="o">.</span><span class="n">updated_arm</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.update_exp_default_bs" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">update_exp_default_bs</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">update_exp_default_bs</span><span class="p">(</span><span class="n">updated_default_bs</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Update the default batch size for exploration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>updated_default_bs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;UpdateExpDefaultBs&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.job.commands.UpdateExpDefaultBs&lt;/code&gt;)" href="../../job/commands/#zeus.optimizer.batch_size.server.job.commands.UpdateExpDefaultBs">UpdateExpDefaultBs</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Job Id and new default batch size</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>`ZeusBSOServiceBadOperationError`</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job during this session. This operation should have
    fetched the job first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_exp_default_bs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">updated_default_bs</span><span class="p">:</span> <span class="n">UpdateExpDefaultBs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the default batch size for exploration.</span>

<span class="sd">    Args:</span>
<span class="sd">        updated_default_bs: Job Id and new default batch size</span>

<span class="sd">    Raises:</span>
<span class="sd">        `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                fetched the job first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">updated_default_bs</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_exp_default_bs</span><span class="p">(</span><span class="n">updated_default_bs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.create_trial" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_trial</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_trial</span><span class="p">(</span><span class="n">trial</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a new trial.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trial</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;CreateExplorationTrial&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.commands.CreateExplorationTrial&lt;/code&gt;)" href="../../batch_size_state/commands/#zeus.optimizer.batch_size.server.batch_size_state.commands.CreateExplorationTrial">CreateExplorationTrial</a> | <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;CreateMabTrial&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.commands.CreateMabTrial&lt;/code&gt;)" href="../../batch_size_state/commands/#zeus.optimizer.batch_size.server.batch_size_state.commands.CreateMabTrial">CreateMabTrial</a> | <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;CreateConcurrentTrial&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.commands.CreateConcurrentTrial&lt;/code&gt;)" href="../../batch_size_state/commands/#zeus.optimizer.batch_size.server.batch_size_state.commands.CreateConcurrentTrial">CreateConcurrentTrial</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>New trial to create.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>`ZeusBSOServiceBadOperationError`</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job during this session. This operation should have
    fetched the job first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trial</span><span class="p">:</span> <span class="n">CreateExplorationTrial</span> <span class="o">|</span> <span class="n">CreateMabTrial</span> <span class="o">|</span> <span class="n">CreateConcurrentTrial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ReadTrial</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new trial.</span>

<span class="sd">    Args:</span>
<span class="sd">        trial: New trial to create.</span>

<span class="sd">    Raises:</span>
<span class="sd">        `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                fetched the job first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
    <span class="n">trial_number</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_next_trial_number</span><span class="p">(</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">create_trial</span><span class="p">(</span><span class="n">CreateTrial</span><span class="p">(</span><span class="o">**</span><span class="n">trial</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span> <span class="n">trial_number</span><span class="o">=</span><span class="n">trial_number</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">ReadTrial</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">trial</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">trial</span><span class="o">.</span><span class="n">batch_size</span><span class="p">,</span> <span class="n">trial_number</span><span class="o">=</span><span class="n">trial_number</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.get_random_choices" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_random_choices</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_random_choices</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get randome choices based on job's seed.</p>
<p>If seed is not None (set by the user) we get the random choices from the generator that is stored in the database.
Otherwise, we get random choices based on random seed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>choice</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GetRandomChoices&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.services.commands.GetRandomChoices&lt;/code&gt;)" href="../commands/#zeus.optimizer.batch_size.server.services.commands.GetRandomChoices">GetRandomChoices</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Job id and list of choices</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span>[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>reuslt random choices</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>`ZeusBSOServiceBadOperationError`</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job during this session. This operation should have
    fetched the job first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_random_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choice</span><span class="p">:</span> <span class="n">GetRandomChoices</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get randome choices based on job&#39;s seed.</span>

<span class="sd">    If seed is not None (set by the user) we get the random choices from the generator that is stored in the database.</span>
<span class="sd">    Otherwise, we get random choices based on random seed.</span>

<span class="sd">    Args:</span>
<span class="sd">        choice: Job id and list of choices</span>

<span class="sd">    Returns:</span>
<span class="sd">        reuslt random choices</span>

<span class="sd">    Raises:</span>
<span class="sd">        `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                fetched the job first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">choice</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span>
    <span class="n">rng</span><span class="p">,</span> <span class="n">should_update</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_generator</span><span class="p">(</span><span class="n">choice</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">),</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">should_update</span><span class="p">:</span>
        <span class="c1"># If we used the generator from database, should update the generator state after using it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_generator_state</span><span class="p">(</span>
            <span class="n">UpdateGeneratorState</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">choice</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()))</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.get_normal" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_normal</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_normal</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Sample from normal distribution and update the generator state if seed was set.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>arg</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GetNormal&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.services.commands.GetNormal&lt;/code&gt;)" href="../commands/#zeus.optimizer.batch_size.server.services.commands.GetNormal">GetNormal</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>args for <code>numpy.random.normal</code>, which is loc(mean of distribution) and scale(stdev of distribution)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Drawn sample.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>`ZeusBSOServiceBadOperationError`</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job during this session. This operation should have
    fetched the job first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="n">GetNormal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sample from normal distribution and update the generator state if seed was set.</span>

<span class="sd">    Args:</span>
<span class="sd">        arg: args for `numpy.random.normal`, which is loc(mean of distribution) and scale(stdev of distribution)</span>

<span class="sd">    Returns:</span>
<span class="sd">        Drawn sample.</span>

<span class="sd">    Raises:</span>
<span class="sd">        `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                fetched the job first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rng</span><span class="p">,</span> <span class="n">should_update</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_generator</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span> <span class="n">arg</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">should_update</span><span class="p">:</span>
        <span class="c1"># If we used the generator from database, should update the generator state after using it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_generator_state</span><span class="p">(</span>
            <span class="n">UpdateGeneratorState</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">arg</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()))</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.get_job" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_job</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get job from database.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>job_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Job Id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;JobState&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.job.models.JobState&lt;/code&gt;)" href="../../job/models/#zeus.optimizer.batch_size.server.job.models.JobState">JobState</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JobState if we found one, None if we couldn't find a job matching the job id.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JobState</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get job from database.</span>

<span class="sd">    Args:</span>
<span class="sd">        job_id: Job Id</span>

<span class="sd">    Returns:</span>
<span class="sd">        JobState if we found one, None if we couldn&#39;t find a job matching the job id.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">get_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.get_trial" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_trial</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_trial</span><span class="p">(</span><span class="n">trial</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get a trial from database.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>trial</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ReadTrial&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.commands.ReadTrial&lt;/code&gt;)" href="../../batch_size_state/commands/#zeus.optimizer.batch_size.server.batch_size_state.commands.ReadTrial">ReadTrial</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(Job Id, batch size, trial_number) triplet.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;Trial&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.models.Trial&lt;/code&gt;)" href="../../batch_size_state/models/#zeus.optimizer.batch_size.server.batch_size_state.models.Trial">Trial</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Trial if we found one, None if we couldn't find a job matching trial.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trial</span><span class="p">:</span> <span class="n">ReadTrial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Trial</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a trial from database.</span>

<span class="sd">    Args:</span>
<span class="sd">        trial: (Job Id, batch size, trial_number) triplet.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Trial if we found one, None if we couldn&#39;t find a job matching trial.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_trial</span><span class="p">(</span><span class="n">trial</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.create_job" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_job</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_job</span><span class="p">(</span><span class="n">new_job</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a new job.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_job</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;CreateJob&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.job.commands.CreateJob&lt;/code&gt;)" href="../../job/commands/#zeus.optimizer.batch_size.server.job.commands.CreateJob">CreateJob</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration of a new job</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_job</span><span class="p">:</span> <span class="n">CreateJob</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new job.</span>

<span class="sd">    Args:</span>
<span class="sd">        new_job: Configuration of a new job</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span><span class="n">new_job</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.get_trial_results_of_bs" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_trial_results_of_bs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_trial_results_of_bs</span><span class="p">(</span><span class="n">bs</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load window size amount of results for a given batch size. If window size &lt;= 0, load all of them.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;BatchSizeBase&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.models.BatchSizeBase&lt;/code&gt;)" href="../../batch_size_state/models/#zeus.optimizer.batch_size.server.batch_size_state.models.BatchSizeBase">BatchSizeBase</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(job_id, batch size) pair.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TrialResultsPerBs&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.models.TrialResultsPerBs&lt;/code&gt;)" href="../../batch_size_state/models/#zeus.optimizer.batch_size.server.batch_size_state.models.TrialResultsPerBs">TrialResultsPerBs</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of windowed measurements in descending order for that (job_id, batch size)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>`ZeusBSOServiceBadOperationError`</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job during this session. This operation should have
    fetched the job first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_trial_results_of_bs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bs</span><span class="p">:</span> <span class="n">BatchSizeBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TrialResultsPerBs</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load window size amount of results for a given batch size. If window size &lt;= 0, load all of them.</span>

<span class="sd">    Args:</span>
<span class="sd">        bs: (job_id, batch size) pair.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list of windowed measurements in descending order for that (job_id, batch size)</span>

<span class="sd">    Raises:</span>
<span class="sd">        `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                fetched the job first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_job</span><span class="p">(</span><span class="n">bs</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_trial_results_of_bs</span><span class="p">(</span>
        <span class="n">BatchSizeBase</span><span class="p">(</span><span class="n">job_id</span><span class="o">=</span><span class="n">bs</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">bs</span><span class="o">.</span><span class="n">batch_size</span><span class="p">),</span>
        <span class="n">job</span><span class="o">.</span><span class="n">window_size</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.create_arms" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_arms</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_arms</span><span class="p">(</span><span class="n">new_arms</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create GuassianTs arms for the job.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_arms</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GaussianTsArmState&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.batch_size_state.models.GaussianTsArmState&lt;/code&gt;)" href="../../batch_size_state/models/#zeus.optimizer.batch_size.server.batch_size_state.models.GaussianTsArmState">GaussianTsArmState</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of new arm states</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>`ZeusBSOServiceBadOperationError`</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job during this session. This operation should have
    fetched the job first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_arms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_arms</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">GaussianTsArmState</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create GuassianTs arms for the job.</span>

<span class="sd">    Args:</span>
<span class="sd">        new_arms: List of new arm states</span>

<span class="sd">    Raises:</span>
<span class="sd">        `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                fetched the job first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_arms</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">new_arms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">create_arms</span><span class="p">(</span><span class="n">new_arms</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.update_job_stage" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">update_job_stage</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">update_job_stage</span><span class="p">(</span><span class="n">updated_stage</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Update the job stage (Pruning -&gt; MAB).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>updated_stage</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;UpdateJobStage&lt;/span&gt; (&lt;code&gt;zeus.optimizer.batch_size.server.job.commands.UpdateJobStage&lt;/code&gt;)" href="../../job/commands/#zeus.optimizer.batch_size.server.job.commands.UpdateJobStage">UpdateJobStage</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated stage.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>`ZeusBSOServiceBadOperationError`</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When we didn't fetch the job during this session. This operation should have
    fetched the job first.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_job_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">updated_stage</span><span class="p">:</span> <span class="n">UpdateJobStage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the job stage (Pruning -&gt; MAB).</span>

<span class="sd">    Args:</span>
<span class="sd">        updated_stage: Updated stage.</span>

<span class="sd">    Raises:</span>
<span class="sd">        `ZeusBSOServiceBadOperationError`: When we didn&#39;t fetch the job during this session. This operation should have</span>
<span class="sd">                fetched the job first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_job_fetched</span><span class="p">(</span><span class="n">updated_stage</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_stage</span><span class="p">(</span><span class="n">updated_stage</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService.delete_job" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">delete_job</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Delete the job.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>job_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID of the job.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the job is deleted. False if none was deleted</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete the job.</span>

<span class="sd">    Args:</span>
<span class="sd">        job_id: ID of the job.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the job is deleted. False if none was deleted</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">delete_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService._get_generator" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">_get_generator</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">_get_generator</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get generator based on job_id. If mab_seed is not none, we should update the state after using generator.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="numpy.random.Generator">Generator</span>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of [Generator, if we should update state]</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_get_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">np_Generator</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get generator based on job_id. If mab_seed is not none, we should update the state after using generator.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple of [Generator, if we should update state]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">job_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>

    <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()))</span>

    <span class="n">should_update</span> <span class="o">=</span> <span class="n">job_state</span><span class="o">.</span><span class="n">mab_seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">job_state</span><span class="o">.</span><span class="n">mab_seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">job_state</span><span class="o">.</span><span class="n">mab_random_generator_state</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ZeusBSOValueError</span><span class="p">(</span><span class="s2">&quot;Seed is set but generator state is none. Should be impossible&quot;</span><span class="p">)</span>

        <span class="n">state</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">job_state</span><span class="o">.</span><span class="n">mab_random_generator_state</span><span class="p">)</span>
        <span class="n">rng</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">rng</span><span class="p">,</span> <span class="n">should_update</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService._get_job" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">_get_job</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">_get_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the job from the session. If we couldn't find the job, raise a <code>ZeusBSOServiceBadOperationError</code>.</p>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_get_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JobState</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the job from the session. If we couldn&#39;t find the job, raise a `ZeusBSOServiceBadOperationError`.&quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">get_job_from_session</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Should have fetched the job first or job does not exist(job_id = </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService._get_trial" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">_get_trial</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">_get_trial</span><span class="p">(</span><span class="n">trial</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the job from the session. If we couldn't find the trial, raise a <code>ZeusBSOServiceBadOperationError</code>.</p>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_get_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trial</span><span class="p">:</span> <span class="n">ReadTrial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Trial</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the job from the session. If we couldn&#39;t find the trial, raise a `ZeusBSOServiceBadOperationError`.&quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bs_repo</span><span class="o">.</span><span class="n">get_trial_from_session</span><span class="p">(</span><span class="n">trial</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Should have fetched the trial first or trial does not exist(trial = </span><span class="si">{</span><span class="n">trial</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="zeus.optimizer.batch_size.server.services.service.ZeusService._check_job_fetched" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">_check_job_fetched</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">_check_job_fetched</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if we fetched the job in the current session. If we didn't raise a <code>ZeusBSOServiceBadOperationError</code>.</p>


            <details class="quote">
              <summary>Source code in <code>zeus/optimizer/batch_size/server/services/service.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_check_job_fetched</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if we fetched the job in the current session. If we didn&#39;t raise a `ZeusBSOServiceBadOperationError`.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">check_job_fetched</span><span class="p">(</span><span class="n">job_id</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ZeusBSOServiceBadOperationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;check_job_fetched: </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> is not currently in the session&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026 Zeus team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/ml-energy/zeus" target="_blank" rel="noopener" title="Zeus GitHub repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://hub.docker.com/r/mlenergy/zeus" target="_blank" rel="noopener" title="Zeus Docker Hub registry" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://join.slack.com/t/zeus-ml/shared_invite/zt-36fl1m7qa-Ihky6FbfxLtobx40hMj3VA" target="_blank" rel="noopener" title="Zeus Slack workspace" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../../..", "features": ["content.code.copy", "search.suggest", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.tooltips", "announce.dismiss"], "search": "../../../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../../assets/javascripts/bundle.dd8806f2.min.js"></script>
      
        <script src="../../../../../../assets/js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>