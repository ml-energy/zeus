
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Deep learning energy measurement and optimization">
      
      
        <meta name="author" content="Zeus team">
      
      
        <link rel="canonical" href="https://ml.energy/zeus/measure/">
      
      
        <link rel="prev" href="../getting_started/">
      
      
        <link rel="next" href="../optimize/">
      
      
      <link rel="icon" href="../assets/img/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.19">
    
    
      
        <title>Measuring Energy - Zeus Project</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
      <link rel="stylesheet" href="../assets/css/color.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-T3W21TQ7FJ"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-T3W21TQ7FJ",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-T3W21TQ7FJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Measuring Energy - Zeus Project" >
      
        <meta  property="og:description"  content="Deep learning energy measurement and optimization" >
      
        <meta  property="og:image"  content="https://ml.energy/zeus/assets/img/social/measure/index.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://ml.energy/zeus/measure/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Measuring Energy - Zeus Project" >
      
        <meta  name="twitter:description"  content="Deep learning energy measurement and optimization" >
      
        <meta  name="twitter:image"  content="https://ml.energy/zeus/assets/img/social/measure/index.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="zeus" data-md-color-accent="zeus">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#measuring-energy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
              </button>
            
            
We're sharing updates via <a href="https://buttondown.com/ml-energy">The ML.ENERGY Newsletter</a>!
&middot;
Join the Zeus
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 15a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2h2v2m1 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-5m2-8a2 2 0 0 1-2-2 2 2 0 0 1 2-2 2 2 0 0 1 2 2v2H9m0 1a2 2 0 0 1 2 2 2 2 0 0 1-2 2H4a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5m8 2a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2h-2v-2m-1 0a2 2 0 0 1-2 2 2 2 0 0 1-2-2V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5m-2 8a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2h2m0-1a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-5Z"></path></svg></span>
<a href="https://join.slack.com/t/zeus-ml/shared_invite/zt-36fl1m7qa-Ihky6FbfxLtobx40hMj3VA">Slack workspace</a>
to reach out to us.

          </div>
          
            <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Zeus Project" class="md-header__button md-logo" aria-label="Zeus Project" data-md-component="logo">
      
  <img src="../assets/img/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zeus Project
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Measuring Energy
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="zeus" data-md-color-accent="zeus"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ml-energy/zeus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ml-energy/zeus
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Zeus

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../getting_started/" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Measuring Energy

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../optimize/" class="md-tabs__link">
        
  
    
  
  Optimizing Energy

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../research_overview/" class="md-tabs__link">
        
  
    
  
  Research Overview

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../reference/" class="md-tabs__link">
          
  
  Source Code Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Zeus Project" class="md-nav__button md-logo" aria-label="Zeus Project" data-md-component="logo">
      
  <img src="../assets/img/logo.svg" alt="logo">

    </a>
    Zeus Project
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ml-energy/zeus" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ml-energy/zeus
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zeus
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Measuring Energy
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Measuring Energy
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#programmatic-measurement" class="md-nav__link">
    <span class="md-ellipsis">
      Programmatic Measurement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Programmatic Measurement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-and-energy-consumption-of-a-chunk-of-code" class="md-nav__link">
    <span class="md-ellipsis">
      Time and energy consumption of a chunk of code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power-consumption-over-time" class="md-nav__link">
    <span class="md-ellipsis">
      Power consumption over time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronizing-cpu-and-gpu-computations" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronizing CPU and GPU computations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#distributed-power-measurement-and-aggregation" class="md-nav__link">
    <span class="md-ellipsis">
      Distributed Power Measurement and Aggregation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-support" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hardware Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-device-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Generic device interfaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amd-gpu" class="md-nav__link">
    <span class="md-ellipsis">
      AMD GPU
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AMD GPU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    <span class="md-ellipsis">
      Initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rocm-and-amdsmi-versions" class="md-nav__link">
    <span class="md-ellipsis">
      ROCm and AMDSMI Versions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numa-cpus" class="md-nav__link">
    <span class="md-ellipsis">
      NUMA CPUs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apple-silicon" class="md-nav__link">
    <span class="md-ellipsis">
      Apple Silicon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jetson-platforms" class="md-nav__link">
    <span class="md-ellipsis">
      Jetson Platforms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metric-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Metric Monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metric Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-metrics-and-naming" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Metrics and Naming
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#energyhistogram" class="md-nav__link">
    <span class="md-ellipsis">
      EnergyHistogram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#energycumulativecounter" class="md-nav__link">
    <span class="md-ellipsis">
      EnergyCumulativeCounter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powergauge" class="md-nav__link">
    <span class="md-ellipsis">
      PowerGauge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-metrics-in-prometheus" class="md-nav__link">
    <span class="md-ellipsis">
      Querying Metrics in Prometheus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-power-and-energy-monitor" class="md-nav__link">
    <span class="md-ellipsis">
      CLI power and energy monitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repeated-execution-of-the-main-script-module-after-using-zeus-monitors" class="md-nav__link">
    <span class="md-ellipsis">
      Repeated execution of the main script module after using Zeus monitors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-energy-measurement-missing-or-permission-denied-intel-rapl" class="md-nav__link">
    <span class="md-ellipsis">
      CPU energy measurement missing or permission denied (Intel RAPL)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../optimize/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Optimizing Energy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Optimizing Energy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimize/power_limit_optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power Limit Optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimize/batch_size_optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Batch Size Optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimize/pipeline_frequency_optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipeline Frequency Optimizer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../research_overview/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Research Overview
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Research Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../research_overview/zeus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zeus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../research_overview/perseus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perseus
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Source Code Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Source Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Source Code Reference
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Source Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/_legacy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    _legacy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1" id="__nav_6_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1">
            <span class="md-nav__icon md-icon"></span>
            _legacy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/_legacy/job/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    job
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_1_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/_legacy/policy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    policy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_1_2" id="__nav_6_1_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_1_2">
            <span class="md-nav__icon md-icon"></span>
            policy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/_legacy/policy/interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/_legacy/policy/mab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/_legacy/policy/optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    optimizer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/_legacy/simulate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    simulate
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/callback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    callback
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/device/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    device
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3" id="__nav_6_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3">
            <span class="md-nav__icon md-icon"></span>
            device
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/device/cpu/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    cpu
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_2" id="__nav_6_1_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_2">
            <span class="md-nav__icon md-icon"></span>
            cpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/cpu/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/cpu/rapl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rapl
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/exception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exception
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/device/gpu/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    gpu
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_4" id="__nav_6_1_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_4">
            <span class="md-nav__icon md-icon"></span>
            gpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/gpu/amd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    amd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/gpu/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/gpu/nvidia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nvidia
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/device/soc/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    soc
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_3_5" id="__nav_6_1_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3_5">
            <span class="md-nav__icon md-icon"></span>
            soc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/soc/apple/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    apple
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/soc/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/device/soc/jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jetson
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/exception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exception
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/metric/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    metric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/monitor/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    monitor
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_6" id="__nav_6_1_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_6">
            <span class="md-nav__icon md-icon"></span>
            monitor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/monitor/carbon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    carbon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/monitor/energy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    energy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/monitor/power/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    power
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/monitor/power_streaming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    power_streaming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/monitor/price/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    price
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/monitor/temperature/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    temperature
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    optimizer
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7" id="__nav_6_1_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7">
            <span class="md-nav__icon md-icon"></span>
            optimizer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/batch_size/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    batch_size
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1" id="__nav_6_1_7_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1">
            <span class="md-nav__icon md-icon"></span>
            batch_size
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/batch_size/server/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    server
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4" id="__nav_6_1_7_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_7_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1_4">
            <span class="md-nav__icon md-icon"></span>
            server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/batch_size/server/batch_size_state/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    batch_size_state
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4_1" id="__nav_6_1_7_1_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_7_1_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1_4_1">
            <span class="md-nav__icon md-icon"></span>
            batch_size_state
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/batch_size_state/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/batch_size_state/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/batch_size_state/repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/batch_size/server/database/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    database
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4_3" id="__nav_6_1_7_1_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_7_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/database/db_connection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    db_connection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/database/repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repository
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/database/schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/explorer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    explorer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/batch_size/server/job/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    job
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4_6" id="__nav_6_1_7_1_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_7_1_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            job
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/job/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/job/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/job/repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/mab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_1_4_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/batch_size/server/services/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    services
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_1_4_10" id="__nav_6_1_7_1_4_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_6_1_7_1_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_1_4_10">
            <span class="md-nav__icon md-icon"></span>
            services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/services/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/batch_size/server/services/service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    service
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/pipeline_frequency/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    pipeline_frequency
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_2" id="__nav_6_1_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_1_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_2">
            <span class="md-nav__icon md-icon"></span>
            pipeline_frequency
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/pipeline_frequency/common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/pipeline_frequency/frequency_controller/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    frequency_controller
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/pipeline_frequency/optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_7_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/optimizer/pipeline_frequency/server/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    server
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_7_2_4" id="__nav_6_1_7_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_6_1_7_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_7_2_4">
            <span class="md-nav__icon md-icon"></span>
            server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/pipeline_frequency/server/job_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    job_manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/pipeline_frequency/server/router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/pipeline_frequency/server/scheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scheduler
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/optimizer/power_limit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    power_limit
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/show_env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    show_env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/utils/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    utils
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1_9" id="__nav_6_1_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_9">
            <span class="md-nav__icon md-icon"></span>
            utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/async_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    async_utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/framework/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    framework
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/lat_lon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lat_lon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/lr_scaler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lr_scaler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/metric/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    metric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/multiprocessing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    multiprocessing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/pydantic_v1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_v1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/zeusd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zeusd
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#programmatic-measurement" class="md-nav__link">
    <span class="md-ellipsis">
      Programmatic Measurement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Programmatic Measurement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-and-energy-consumption-of-a-chunk-of-code" class="md-nav__link">
    <span class="md-ellipsis">
      Time and energy consumption of a chunk of code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power-consumption-over-time" class="md-nav__link">
    <span class="md-ellipsis">
      Power consumption over time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronizing-cpu-and-gpu-computations" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronizing CPU and GPU computations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#distributed-power-measurement-and-aggregation" class="md-nav__link">
    <span class="md-ellipsis">
      Distributed Power Measurement and Aggregation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-support" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hardware Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-device-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Generic device interfaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amd-gpu" class="md-nav__link">
    <span class="md-ellipsis">
      AMD GPU
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AMD GPU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization" class="md-nav__link">
    <span class="md-ellipsis">
      Initialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rocm-and-amdsmi-versions" class="md-nav__link">
    <span class="md-ellipsis">
      ROCm and AMDSMI Versions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numa-cpus" class="md-nav__link">
    <span class="md-ellipsis">
      NUMA CPUs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apple-silicon" class="md-nav__link">
    <span class="md-ellipsis">
      Apple Silicon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jetson-platforms" class="md-nav__link">
    <span class="md-ellipsis">
      Jetson Platforms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metric-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Metric Monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metric Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-metrics-and-naming" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Metrics and Naming
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#energyhistogram" class="md-nav__link">
    <span class="md-ellipsis">
      EnergyHistogram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#energycumulativecounter" class="md-nav__link">
    <span class="md-ellipsis">
      EnergyCumulativeCounter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powergauge" class="md-nav__link">
    <span class="md-ellipsis">
      PowerGauge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-metrics-in-prometheus" class="md-nav__link">
    <span class="md-ellipsis">
      Querying Metrics in Prometheus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-power-and-energy-monitor" class="md-nav__link">
    <span class="md-ellipsis">
      CLI power and energy monitor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repeated-execution-of-the-main-script-module-after-using-zeus-monitors" class="md-nav__link">
    <span class="md-ellipsis">
      Repeated execution of the main script module after using Zeus monitors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-energy-measurement-missing-or-permission-denied-intel-rapl" class="md-nav__link">
    <span class="md-ellipsis">
      CPU energy measurement missing or permission denied (Intel RAPL)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="measuring-energy">Measuring Energy</h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Please refer to the <a href="../getting_started/">Getting Started</a> guide to first install Zeus and set up your environment before proceeding with this section.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Once you've installed Zeus, you can use our <a href="../getting_started/#verifying-installation">environment validation script</a> to see if devices are being detected by Zeus as expected.</p>
</div>
<p>Zeus makes it very easy to measure time, power, and energy both programmatically in Python and also on the command line.
Measuring power and energy is also very low overhead, typically taking less than 10 ms for each call.</p>
<h2 id="programmatic-measurement">Programmatic Measurement</h2>
<h3 id="time-and-energy-consumption-of-a-chunk-of-code">Time and energy consumption of a chunk of code</h3>
<p><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a> makes it very simple to measure the GPU time and energy consumption of arbitrary Python code blocks.</p>
<p>A <em>measurement window</em> is defined by a code block wrapped with <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;begin_window&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor.begin_window"><code>begin_window</code></a> and <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;end_window&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor.end_window"><code>end_window</code></a>.
<a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;end_window&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor.end_window"><code>end_window</code></a> will return a <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;Measurement&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.Measurement"><code>Measurement</code></a> object, which holds the time and energy consumption of the window.
Users can specify and measure multiple measurement windows at the same time, and they can be arbitrarily nested or overlapping as long as they are given different names.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">zeus.monitor</span><span class="w"> </span><span class="kn">import</span> <span class="n">ZeusMonitor</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># All GPUs are measured simultaneously if `gpu_indices` is not given.</span>
<span class="hll">    <span class="n">monitor</span> <span class="o">=</span> <span class="n">ZeusMonitor</span><span class="p">(</span><span class="n">gpu_indices</span><span class="o">=</span><span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">current_device</span><span class="p">()])</span>
</span>
    <span class="k">for</span> <span class="n">epoch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">monitor</span><span class="o">.</span><span class="n">begin_window</span><span class="p">(</span><span class="s2">&quot;epoch&quot;</span><span class="p">)</span>

        <span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">train_loader</span><span class="p">:</span>
<span class="hll">            <span class="n">monitor</span><span class="o">.</span><span class="n">begin_window</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">)</span>
</span><span class="hll">            <span class="n">train_one_step</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span class="hll">            <span class="n">result</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="n">end_window</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">)</span>
</span>            <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="n">mes</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="n">end_window</span><span class="p">(</span><span class="s2">&quot;epoch&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Epoch </span><span class="si">{</span><span class="n">epoch</span><span class="si">}</span><span class="s2"> consumed </span><span class="si">{</span><span class="n">mes</span><span class="o">.</span><span class="n">time</span><span class="si">}</span><span class="s2"> s and </span><span class="si">{</span><span class="n">mes</span><span class="o">.</span><span class="n">total_energy</span><span class="si">}</span><span class="s2"> J.&quot;</span><span class="p">)</span>

        <span class="n">avg_time</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">steps</span><span class="p">))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
        <span class="n">avg_energy</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">total_energy</span><span class="p">,</span> <span class="n">steps</span><span class="p">))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;One step took </span><span class="si">{</span><span class="n">avg_time</span><span class="si">}</span><span class="s2"> s and </span><span class="si">{</span><span class="n">avg_energy</span><span class="si">}</span><span class="s2"> J on average.&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerMonitor&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor"><code>zeus.monitor.PowerMonitor</code></a></p>
<p>This monitor spawns a process that polls the instantaneous GPU power consumption API and exposes two methods: <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_power&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor.get_power"><code>get_power</code></a> and <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_energy&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor.get_energy"><code>get_energy</code></a>.
For GPUs older than Volta that do not support querying energy directly, <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a> automatically uses the <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerMonitor&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor"><code>PowerMonitor</code></a> internally.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Use of global variables on GPUs older than Volta</p>
<p>On GPUs older than Volta, <strong>you should not</strong> instantiate <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a> as a global variable without protecting it with <code>if __name__ == "__main__"</code>.
It's because the energy query API is only available on Volta or newer NVIDIA GPU microarchitectures, and for older GPUs, a separate process that polls the power API has to be spawned (i.e., <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerMonitor&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor"><code>PowerMonitor</code></a>).
In this case, global code that spawns the process should be guarded with <code>if __name__ == "__main__"</code>.
More details in <a class="external" href="https://docs.python.org/3/library/multiprocessing.html#the-spawn-and-forkserver-start-methods">Python docs</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title"><code>gpu_indices</code> and <code>CUDA_VISIBLE_DEVICES</code></p>
<p>Zeus always respects <code>CUDA_VISIBLE_DEVICES</code> if set.
In other words, if <code>CUDA_VISIBLE_DEVICES=1,3</code> and <code>gpu_indices=[1]</code>, Zeus will understand that as GPU 3 in the system.</p>
</div>
<div class="admonition important">
<p class="admonition-title"><code>gpu_indices</code> and optimization</p>
<p>In general, energy optimizers measure the energy of the GPU through a <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a> instance that is passed to their constructor.
Thus, only the GPUs specified by <code>gpu_indices</code> will be the target of optimization.</p>
</div>
<h3 id="power-consumption-over-time">Power consumption over time</h3>
<p>Apart from energy, you can also measure the power consumption of GPUs over time by directly using the <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerMonitor&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor"><code>PowerMonitor</code></a>.
It measures power in three <em>power domains</em>:<br />
- <strong>GPU average power</strong>: Windowed average power consumption of the GPU over a one-second interval.
- <strong>GPU instantaneous power</strong>: Instantaneous power consumption of the GPU at the time of the query.
- <strong>GPU memory average power</strong> (Hopper or newer): Windowed average power consumption of the GPU's memory.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Not all GPUs support all power domains, and this is not really documented well. You'll have to check on your GPU by instantiating <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerMonitor&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor"><code>PowerMonitor</code></a>, which will automatically detect supported power domains.</p>
</div>
<p>When <code>PowerMonitor</code> is instantiated, it spawns separate processes that poll the device's power consumption API and collects deduplicated power samples in-memory.
Then, you can call <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_all_power_timelines&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor.get_all_power_timelines"><code>get_all_power_timelines</code></a> or <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_power_timeline&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor.get_power_timeline"><code>get_power_timeline</code></a> for a specific power domain to retrieve the power samples collected either for the whole lifetime of the monitor, or for a specific time window.</p>
<h3 id="synchronizing-cpu-and-gpu-computations">Synchronizing CPU and GPU computations</h3>
<p>Deep learning frameworks typically run actual computation on GPUs in an asynchronous fashion.
That is, the CPU (Python interpreter) asynchronously dispatches computations to run on the GPU and moves on to dispatch the next computation without waiting for the GPU to finish.
This helps GPUs achieve higher utilization with less idle time.</p>
<p>Due to this asynchronous nature of Deep Learning frameworks, we need to be careful when we want to take time and energy measurements of GPU execution.
We want <em>only and all</em> the computations dispatched between <code>begin_window</code> and <code>end_window</code> to be captured by our time and energy measurement.
That's what the <code>sync_execution_with</code> parameter in <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a> and <code>sync_execution</code> paramter in <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;begin_window&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor.begin_window"><code>begin_window</code></a> and <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;end_window&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor.end_window"><code>end_window</code></a> are for.
Depending on the Deep Learning framework you're using (currently PyTorch and JAX are supported), <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a> will automatically synchronize CPU and GPU execution to make sure all and only the computations dispatched between the window are captured.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Zeus has one function used globally across the codebase for device synchronization: <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;sync_execution&lt;/span&gt;" href="../reference/utils/framework/#zeus.utils.framework.sync_execution"><code>sync_execution</code></a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a> covers only the common and simple case of device synchronization, when GPU indices (<code>gpu_indices</code>) correspond to one whole physical device.
This is usually what you want, except when using more advanced device partitioning (e.g., using <code>--xla_force_host_platform_device_count</code> in JAX to partition CPUs into more pieces).
In such cases, you probably want to opt out from using this function and handle synchronization manually at the appropriate granularity.</p>
</div>
<h2 id="distributed-power-measurement-and-aggregation">Distributed Power Measurement and Aggregation</h2>
<p><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a> is local to a single machine, but sometimes, you may want to monitor power across multiple nodes in a cluster.
In this case, you can run the Zeus daemon (<a href="https://crates.io/crates/zeusd">zeusd</a>) on each machine and stream power readings over SSE (Server-Sent Events) to a central client (<a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerStreamingClient&lt;/span&gt;" href="../reference/monitor/power_streaming/#zeus.monitor.power_streaming.PowerStreamingClient"><code>PowerStreamingClient</code></a>) for real-time monitoring and aggregation.</p>
<p>Each Zeus daemon endpoint is described by a <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusdConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;" href="../reference/utils/zeusd/#zeus.utils.zeusd.ZeusdConfig"><code>ZeusdConfig</code></a>, constructed via <code>ZeusdConfig.tcp(...)</code> or <code>ZeusdConfig.uds(...)</code>.
Both <code>gpu_indices</code> and <code>cpu_indices</code> follow the same convention as <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a>:</p>
<ul>
<li><code>None</code> (default): Stream all available devices.</li>
<li>A list of indices (e.g., <code>[0, 1]</code>): Stream only those devices.</li>
<li>An empty list (<code>[]</code>): Skip streaming for that device type entirely.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">zeus.utils.zeusd</span><span class="w"> </span><span class="kn">import</span> <span class="n">ZeusdConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">zeus.monitor.power_streaming</span><span class="w"> </span><span class="kn">import</span> <span class="n">PowerStreamingClient</span>

<span class="c1"># SSE connections start immediately on construction.</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">PowerStreamingClient</span><span class="p">(</span>
    <span class="n">servers</span><span class="o">=</span><span class="p">[</span>
        <span class="n">ZeusdConfig</span><span class="o">.</span><span class="n">tcp</span><span class="p">(</span><span class="s2">&quot;node1&quot;</span><span class="p">,</span> <span class="mi">4938</span><span class="p">,</span> <span class="n">gpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">cpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="n">ZeusdConfig</span><span class="o">.</span><span class="n">tcp</span><span class="p">(</span><span class="s2">&quot;node2&quot;</span><span class="p">,</span> <span class="mi">4938</span><span class="p">),</span>        <span class="c1"># all GPUs + all CPUs</span>
        <span class="n">ZeusdConfig</span><span class="o">.</span><span class="n">uds</span><span class="p">(</span><span class="s2">&quot;/var/run/zeusd.sock&quot;</span><span class="p">),</span> <span class="c1"># local UDS</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="c1"># Snapshot: latest readings from all endpoints, keyed by endpoint identifier.</span>
<span class="n">readings</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_power</span><span class="p">()</span>
<span class="k">for</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">pr</span> <span class="ow">in</span> <span class="n">readings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">: timestamp=</span><span class="si">{</span><span class="n">pr</span><span class="o">.</span><span class="n">timestamp_s</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  GPU power: </span><span class="si">{</span><span class="n">pr</span><span class="o">.</span><span class="n">gpu_power_w</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">cpu_idx</span><span class="p">,</span> <span class="n">cpu_reading</span> <span class="ow">in</span> <span class="n">pr</span><span class="o">.</span><span class="n">cpu_power_w</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  CPU </span><span class="si">{</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">cpu_reading</span><span class="o">.</span><span class="n">cpu_w</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> W, DRAM: </span><span class="si">{</span><span class="n">cpu_reading</span><span class="o">.</span><span class="n">dram_w</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Blocking iterator: yields a snapshot each time new SSE data arrives.</span>
<span class="c1"># Iteration stops when stop() is called.</span>
<span class="k">for</span> <span class="n">readings</span> <span class="ow">in</span> <span class="n">client</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">pr</span> <span class="ow">in</span> <span class="n">readings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">: GPU=</span><span class="si">{</span><span class="n">pr</span><span class="o">.</span><span class="n">gpu_power_w</span><span class="si">}</span><span class="s2">, CPU=</span><span class="si">{</span><span class="n">pr</span><span class="o">.</span><span class="n">cpu_power_w</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Async iterator: same as above, without blocking the event loop.</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">readings</span> <span class="ow">in</span> <span class="n">client</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">pr</span> <span class="ow">in</span> <span class="n">readings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">: GPU=</span><span class="si">{</span><span class="n">pr</span><span class="o">.</span><span class="n">gpu_power_w</span><span class="si">}</span><span class="s2">, CPU=</span><span class="si">{</span><span class="n">pr</span><span class="o">.</span><span class="n">cpu_power_w</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">client</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Authentication</p>
<p>If <code>zeusd</code> is running with <code>--signing-key-path</code> (i.e., JWT authentication enabled), set the <code>ZEUSD_TOKEN</code> environment variable or pass <code>token=</code> directly in <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusdConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;" href="../reference/utils/zeusd/#zeus.utils.zeusd.ZeusdConfig"><code>ZeusdConfig</code></a>. The client automatically checks <code>/discover</code> to determine whether auth is required and raises a clear error if a token is needed but not provided.</p>
</div>
<p><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_power&lt;/span&gt;" href="../reference/monitor/power_streaming/#zeus.monitor.power_streaming.PowerStreamingClient.get_power"><code>get_power</code></a> returns a dict mapping each endpoint identifier to a <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerReadings&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;" href="../reference/monitor/power_streaming/#zeus.monitor.power_streaming.PowerReadings"><code>PowerReadings</code></a> object containing a Unix timestamp, per-GPU power in watts, and per-CPU <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;CpuPowerReading&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;" href="../reference/monitor/power_streaming/#zeus.monitor.power_streaming.CpuPowerReading"><code>CpuPowerReading</code></a> objects (with <code>cpu_w</code> and optional <code>dram_w</code> fields, both in watts).</p>
<p>The client spawns one background thread per device type per zeusd endpoint on construction.
Each thread holds an SSE connection and automatically reconnects on disconnection.
Unless <code>cpu_indices</code> is set to <code>[]</code>, the client probes the zeusd one-shot CPU power endpoint on init; if RAPL is not available on that server, a warning is logged and CPU streaming is skipped.
Call <code>stop()</code> when done to cleanly shut down background threads.
zeusd uses demand-driven polling -- power is only read from the hardware while at least one client is connected, so idle endpoints consume no resources.</p>
<h2 id="hardware-support">Hardware Support</h2>
<p>For GPUs, we currently support both NVIDIA (via NVML) and AMD GPUs (via AMDSMI, with ROCm 6.1 or later).</p>
<p>CPU measurement is supported for devices that have the RAPL interface built in.
This includes the majority of Intel CPUs and most modern AMD CPUs.
DRAM energy measurement are available on some CPUs as well.</p>
<p>To check CPU/GPU/DRAM measurement support, refer to <a href="../getting_started/#verifying-installation">Verifying installation</a>.</p>
<p>Energy measurement for Apple Silicon and Jetson Platforms is supported as well. For more information, refer to <a href="#apple-silicon">Apple Silicon</a> and <a href="#jetson-platforms">Jetson Platforms</a>.</p>
<h3 id="generic-device-interfaces">Generic device interfaces</h3>
<p>The <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_gpus&lt;/span&gt;" href="../reference/device/gpu/#zeus.device.gpu.get_gpus"><code>get_gpus</code></a> function returns a <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GPUs&lt;/span&gt;" href="../reference/device/gpu/common/#zeus.device.gpu.common.GPUs"><code>GPUs</code></a> object, which can be either an <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;NVIDIAGPUs&lt;/span&gt;" href="../reference/device/gpu/nvidia/#zeus.device.gpu.nvidia.NVIDIAGPUs"><code>NVIDIAGPUs</code></a> or <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;AMDGPUs&lt;/span&gt;" href="../reference/device/gpu/amd/#zeus.device.gpu.amd.AMDGPUs"><code>AMDGPUs</code></a> object depending on the availability of <code>nvml</code> or <code>amdsmi</code>. Each <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GPUs&lt;/span&gt;" href="../reference/device/gpu/common/#zeus.device.gpu.common.GPUs"><code>GPUs</code></a> object contains one or more <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GPU&lt;/span&gt;" href="../reference/device/gpu/common/#zeus.device.gpu.common.GPU"><code>GPU</code></a> instances, which are specifically <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;NVIDIAGPU&lt;/span&gt;" href="../reference/device/gpu/nvidia/#zeus.device.gpu.nvidia.NVIDIAGPU"><code>NVIDIAGPU</code></a> or <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;AMDGPU&lt;/span&gt;" href="../reference/device/gpu/amd/#zeus.device.gpu.amd.AMDGPU"><code>AMDGPU</code></a> objects.</p>
<p>These <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;GPU&lt;/span&gt;" href="../reference/device/gpu/common/#zeus.device.gpu.common.GPU"><code>GPU</code></a> objects directly call respective <code>nvml</code> or <code>amdsmi</code> methods, providing a one-to-one mapping of methods for seamless GPU abstraction and support for multiple GPU types. For example:
- <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_name&lt;/span&gt;" href="../reference/device/gpu/nvidia/#zeus.device.gpu.nvidia.NVIDIAGPU.get_name"><code>NVIDIAGPU.get_name</code></a> calls <code>pynvml.nvmlDeviceGetName</code>.
- <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_name&lt;/span&gt;" href="../reference/device/gpu/amd/#zeus.device.gpu.amd.AMDGPU.get_name"><code>AMDGPU.get_name</code></a> calls <code>amdsmi.amdsmi_get_gpu_asic_info</code>.</p>
<p><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_cpus&lt;/span&gt;" href="../reference/device/cpu/#zeus.device.cpu.get_cpus"><code>get_cpus</code></a> is similar to <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_gpus&lt;/span&gt;" href="../reference/device/gpu/#zeus.device.gpu.get_gpus"><code>get_gpus</code></a>, but rather abstracts over CPU vendors; <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_soc&lt;/span&gt;" href="../reference/device/soc/#zeus.device.soc.get_soc"><code>get_soc</code></a> abstracts over SoC platforms (currently Apple Silicon and Jetson).</p>
<h3 id="amd-gpu">AMD GPU</h3>
<h4 id="initialization">Initialization</h4>
<p><code>amdsmi.amdsmi_get_energy_count</code> sometimes returns invalid values on <strong>older</strong> GPU models or ROCm versions (e.g., MI100 on ROCm 6.2). See <a href="https://github.com/ROCm/amdsmi/issues/38">ROCm issue #38</a> for more details. During the <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;AMDGPUs&lt;/span&gt;" href="../reference/device/gpu/amd/#zeus.device.gpu.amd.AMDGPUs"><code>AMDGPUs</code></a> object initialization, we call <code>amdsmi.amdsmi_get_energy_count</code> twice for each GPU, with a 0.5-second delay between calls. This difference is compared to power measurements to determine if <code>amdsmi.amdsmi_get_energy_count</code> is stable and reliable. Initialization takes 0.5 seconds regardless of the number of AMD GPUs.</p>
<p><code>amdsmi.amdsmi_get_power_info</code> provides "average_socket_power" and "current_socket_power" fields, but the "current_socket_power" field is sometimes not supported and returns "N/A." During the <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;AMDGPUs&lt;/span&gt;" href="../reference/device/gpu/amd/#zeus.device.gpu.amd.AMDGPUs"><code>AMDGPUs</code></a> object initialization, this method is checked, and if "N/A" is returned, the <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_instant_power_usage&lt;/span&gt;" href="../reference/device/gpu/amd/#zeus.device.gpu.amd.AMDGPU.get_instant_power_usage"><code>AMDGPU.get_instant_power_usage</code></a> method is disabled. Instead, <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_average_power_usage&lt;/span&gt;" href="../reference/device/gpu/amd/#zeus.device.gpu.amd.AMDGPU.get_average_power_usage"><code>AMDGPU.get_average_power_usage</code></a> needs to be used.</p>
<h4 id="rocm-and-amdsmi-versions">ROCm and AMDSMI Versions</h4>
<p>Only ROCm &gt;= 6.1 is supported, as the AMDSMI APIs for power and energy return wrong values. For more information, see <a href="https://github.com/ROCm/amdsmi/issues/22">AMDSMI issue #22</a>. Ensure your <code>amdsmi</code> and ROCm versions are up-to-date.</p>
<h3 id="numa-cpus">NUMA CPUs</h3>
<p>If you have more than one CPU sockets, for instance, running our <a href="../getting_started/#verifying-installation">environment validation script</a> will show two RAPL devices.
To only measure the energy consumption of the CPU used by the current Python process, you can use the <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;get_current_cpu_index&lt;/span&gt;" href="../reference/device/cpu/#zeus.device.cpu.get_current_cpu_index"><code>get_current_cpu_index</code></a> helper function to retrieve the CPU index where the specified process ID is running and pass in only that index to the <code>cpu_indices</code> argument.</p>
<h3 id="apple-silicon">Apple Silicon</h3>
<p>To enable Apple Silicon energy monitoring, you need the optional <a href="https://github.com/ml-energy/zeus-apple-silicon"><code>zeus-apple-silicon</code></a> dependency installed in the <code>apple</code> extra. You can install it with:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>zeus<span class="o">[</span>apple<span class="o">]</span>
</code></pre></div>
<p>Once installed, you can conduct measurement as normal with the <code>ZeusMonitor</code> (<a href="#programmatic-measurement">Programmatic measurement</a>), and metrics for Apple Silicon will be included in a field called <code>soc_energy</code> within the <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;Measurement&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.Measurement"><code>Measurement</code></a> object reported by <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;end_window&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor.end_window"><code>end_window</code></a>. For example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ...</span>
<span class="n">mes</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="n">end_window</span><span class="p">(</span><span class="s2">&quot;epoch&quot;</span><span class="p">)</span>
<span class="n">apple_energy_metrics</span> <span class="o">=</span> <span class="n">mes</span><span class="o">.</span><span class="n">soc_energy</span>
</code></pre></div>
<p>For Apple Silicon, the <code>soc_energy</code> field will include metrics for:</p>
<ul>
<li>On-chip CPU (<code>cpu_total_mj</code>)</li>
<li>Every efficiency core (<code>efficiency_cores_mj</code>)</li>
<li>Every performance core (<code>performance_cores_mj</code>)</li>
<li>Efficiency core manager (<code>efficiency_core_manager_mj</code>)</li>
<li>Performance core manager (<code>performance_core_manager_mj</code>)</li>
<li>DRAM (<code>dram_mj</code>)</li>
<li>On-chip GPU (<code>gpu_mj</code>)</li>
<li>GPU SRAM (<code>gpu_sram_mj</code>)</li>
<li>Apple Neural Engine (ANE) (<code>ane_mj</code>)</li>
</ul>
<p>Note that units are in mJ.</p>
<p>Some metrics may be unavailable for monitoring depending on the specific processor (e.g., DRAM is sometimes unavailable on M1 macs). If a certain subsystem's energy could not be measured, its entry in the result object will simply hold <code>None</code>.</p>
<h3 id="jetson-platforms">Jetson Platforms</h3>
<p>Energy measurement is currently supported for NVIDIA Jetson platforms. Similarly to Apple Silicon, metrics can be retrieved as normal with the Zeus monitor (<a href="#programmatic-measurement">Programmatic measurement</a>), which collects them in the <code>soc_energy</code> field of the returned <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;Measurement&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.Measurement"><code>Measurement</code></a> object. Metrics are reported by <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;end_window&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor.end_window"><code>end_window</code></a>. For example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ...</span>
<span class="n">mes</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="n">end_window</span><span class="p">(</span><span class="s2">&quot;epoch&quot;</span><span class="p">)</span>
<span class="n">jetson_energy_metrics</span> <span class="o">=</span> <span class="n">mes</span><span class="o">.</span><span class="n">soc_energy</span>
</code></pre></div>
<p><strong>Note</strong>: if you do not have a Jetson processor or are not running Linux, the Zeus monitor will skip measuring energy for Jetson platforms.</p>
<p>For Jetson, the <code>soc_energy</code> field will include energy metrics for:</p>
<ul>
<li>On-chip CPU (<code>cpu_energy_mj</code>)</li>
<li>On-chip GPU (<code>gpu_energy_mj</code>)</li>
<li>Total chip energy (<code>total_energy_mj</code>)</li>
</ul>
<p>Note that units are in mJ.</p>
<p>Some metrics may be unavailable for monitoring depending on the specific Jetson device model or configuration (e.g. custom-configured boards), though this is rarely the case. For any unavailable metrics, its entry in the result object will hold <code>None</code>.</p>
<h2 id="metric-monitoring">Metric Monitoring</h2>
<p>You can export Zeus measurements as Prometheus metrics.
Three metrics are currently supported:  </p>
<ol>
<li>Energy consumption of a fixed code range (Histogram)</li>
<li>Power draw over time (Gauge)</li>
<li>Cumulative energy consumption over time (Counter)</li>
</ol>
<div class="admonition prerequisite">
<p class="admonition-title">Prerequisite</p>
<p>As Zeus is a library integrated to applications that are not necessarily servers, Zeus uses the <strong>push</strong> model for metric collection. As such, the <a href="https://prometheus.io/docs/instrumenting/pushing/">Prometheus Push Gateway</a> must be deployed and accessible to the Zeus-integrated application. Example Prometheus configurations can be found in our <a href="https://github.com/ml-energy/zeus/tree/master/docker/prometheus">docker examples</a>.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">9091</span>:9091<span class="w"> </span>prom/pushgateway
</code></pre></div>
</div>
<h3 id="supported-metrics-and-naming">Supported Metrics and Naming</h3>
<p>Zeus organizes metrics using <strong>static metric names</strong> and <strong>dynamic labels</strong> for flexibility and ease of querying in Prometheus. Metric names are static and cannot be overridden, but users can customize the context of the metrics by naming the window when using <code>begin_window()</code> and <code>end_window()</code>.</p>
<p><strong>Metric Name</strong> (<code>component</code> is <code>gpu</code>, <code>cpu</code>, or <code>dram</code>)</p>
<ul>
<li>Energy histogram: <code>energy_monitor_{component}_energy_joules</code></li>
<li>Cumulative energy counter: <code>energy_monitor_{component}_energy_joules</code></li>
<li>Power gauge: <code>power_monitor_{component}_power_watts</code></li>
</ul>
<p>Note that the power gauge metric only supports the GPU component at the moment. Tracking issue: <a href="https://github.com/ml-energy/zeus/issues/128">#128</a></p>
<p><strong>Labels</strong></p>
<ul>
<li><code>window</code>: The user-defined window name provided to <code>begin_window()</code> and <code>end_window()</code> (e.g., <code>energy_histogram.begin_window("epoch_energy")</code>).</li>
<li><code>index</code>: The index of the device (e.g., <code>0</code> for GPU 0).</li>
</ul>
<h3 id="energyhistogram"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EnergyHistogram&lt;/span&gt;" href="../reference/metric/#zeus.metric.EnergyHistogram"><code>EnergyHistogram</code></a></h3>
<p>This metric records energy consumption for GPUs, CPUs, and DRAM as Prometheus Histograms. This is ideal for observing the energy consumption distribution of a fixed and repeated code range.</p>
<div class="highlight"><pre><span></span><code><span class="hll"><span class="kn">from</span><span class="w"> </span><span class="nn">zeus.metric</span><span class="w"> </span><span class="kn">import</span> <span class="n">EnergyHistogram</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="hll">    <span class="n">energy_histogram</span> <span class="o">=</span> <span class="n">EnergyHistogram</span><span class="p">(</span>
</span><span class="hll">        <span class="n">cpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
</span><span class="hll">        <span class="n">gpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
</span><span class="hll">        <span class="n">prometheus_url</span><span class="o">=</span><span class="s1">&#39;http://localhost:9091&#39;</span><span class="p">,</span> 
</span><span class="hll">        <span class="n">job</span><span class="o">=</span><span class="s1">&#39;training_energy_histogram&#39;</span>
</span><span class="hll">    <span class="p">)</span>
</span>
    <span class="k">for</span> <span class="n">epoch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<span class="hll">        <span class="n">energy_histogram</span><span class="o">.</span><span class="n">begin_window</span><span class="p">(</span><span class="s2">&quot;epoch_energy&quot;</span><span class="p">)</span>
</span>        <span class="n">train_one_epoch</span><span class="p">(</span><span class="n">train_loader</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">optimizer</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">epoch</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="n">acc1</span> <span class="o">=</span> <span class="n">validate</span><span class="p">(</span><span class="n">val_loader</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
<span class="hll">        <span class="n">energy_histogram</span><span class="o">.</span><span class="n">end_window</span><span class="p">(</span><span class="s2">&quot;epoch_energy&quot;</span><span class="p">)</span>
</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Epoch </span><span class="si">{</span><span class="n">epoch</span><span class="si">}</span><span class="s2"> completed. Validation Accuracy: </span><span class="si">{</span><span class="n">acc1</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Bucket ranges for GPUs, CPUs, and DRAM can be set during initialization.</p>
<div class="highlight"><pre><span></span><code><span class="n">energy_histogram</span> <span class="o">=</span> <span class="n">EnergyHistogram</span><span class="p">(</span>
    <span class="n">cpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
    <span class="n">gpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
    <span class="n">prometheus_url</span><span class="o">=</span><span class="s2">&quot;http://localhost:9091&quot;</span><span class="p">,</span> 
    <span class="n">job</span><span class="o">=</span><span class="s2">&quot;training_energy_histogram&quot;</span><span class="p">,</span>
    <span class="n">gpu_bucket_range</span><span class="o">=</span><span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">],</span>
    <span class="n">cpu_bucket_range</span><span class="o">=</span><span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">],</span>
    <span class="n">dram_bucket_range</span><span class="o">=</span><span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">40.0</span><span class="p">],</span>
<span class="p">)</span>
</code></pre></div>
</div>
<h3 id="energycumulativecounter"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EnergyCumulativeCounter&lt;/span&gt;" href="../reference/metric/#zeus.metric.EnergyCumulativeCounter"><code>EnergyCumulativeCounter</code></a></h3>
<p>This metric monitors cumulative energy consumption over time.</p>
<div class="highlight"><pre><span></span><code><span class="hll"><span class="kn">from</span><span class="w"> </span><span class="nn">zeus.metric</span><span class="w"> </span><span class="kn">import</span> <span class="n">EnergyCumulativeCounter</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="hll">    <span class="n">cumulative_counter_metric</span> <span class="o">=</span> <span class="n">EnergyCumulativeCounter</span><span class="p">(</span>
</span><span class="hll">        <span class="n">cpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
</span><span class="hll">        <span class="n">gpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
</span><span class="hll">        <span class="n">update_period</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>  
</span><span class="hll">        <span class="n">prometheus_url</span><span class="o">=</span><span class="s1">&#39;http://localhost:9091&#39;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">job</span><span class="o">=</span><span class="s1">&#39;energy_counter_job&#39;</span>
</span><span class="hll">    <span class="p">)</span>
</span>    <span class="n">train_loader</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> 
    <span class="n">val_loader</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  

<span class="hll">    <span class="n">cumulative_counter_metric</span><span class="o">.</span><span class="n">begin_window</span><span class="p">(</span><span class="s2">&quot;training_energy&quot;</span><span class="p">)</span>
</span>
    <span class="k">for</span> <span class="n">epoch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>  
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--- Epoch </span><span class="si">{</span><span class="n">epoch</span><span class="si">}</span><span class="s2"> ---&quot;</span><span class="p">)</span>
        <span class="n">train_one_epoch</span><span class="p">(</span><span class="n">train_loader</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">optimizer</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">epoch</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="n">acc1</span> <span class="o">=</span> <span class="n">validate</span><span class="p">(</span><span class="n">val_loader</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Epoch </span><span class="si">{</span><span class="n">epoch</span><span class="si">}</span><span class="s2"> completed. Validation Accuracy: </span><span class="si">{</span><span class="n">acc1</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%.&quot;</span><span class="p">)</span>

<span class="hll">    <span class="n">cumulative_counter_metric</span><span class="o">.</span><span class="n">end_window</span><span class="p">(</span><span class="s2">&quot;training_energy&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Metric observations are pushed to Prometheus every <code>update_period</code> seconds.</p>
<h3 id="powergauge"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerGauge&lt;/span&gt;" href="../reference/metric/#zeus.metric.PowerGauge"><code>PowerGauge</code></a></h3>
<p>This metric tracks real-time power consumption using Prometheus Gauges.</p>
<div class="highlight"><pre><span></span><code><span class="hll"><span class="kn">from</span><span class="w"> </span><span class="nn">zeus.metric</span><span class="w"> </span><span class="kn">import</span> <span class="n">PowerGauge</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="hll">    <span class="n">power_gauge_metric</span> <span class="o">=</span> <span class="n">PowerGauge</span><span class="p">(</span>
</span><span class="hll">        <span class="n">gpu_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> 
</span><span class="hll">        <span class="n">update_period</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>  
</span><span class="hll">        <span class="n">prometheus_url</span><span class="o">=</span><span class="s1">&#39;http://localhost:9091&#39;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">job</span><span class="o">=</span><span class="s1">&#39;power_gauge_job&#39;</span>
</span><span class="hll">    <span class="p">)</span>
</span>    <span class="n">train_loader</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> 
    <span class="n">val_loader</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  

<span class="hll">    <span class="n">power_gauge_metric</span><span class="o">.</span><span class="n">begin_window</span><span class="p">(</span><span class="s2">&quot;training_power&quot;</span><span class="p">)</span>
</span>
    <span class="k">for</span> <span class="n">epoch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>  
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--- Epoch </span><span class="si">{</span><span class="n">epoch</span><span class="si">}</span><span class="s2"> ---&quot;</span><span class="p">)</span>
        <span class="n">train_one_epoch</span><span class="p">(</span><span class="n">train_loader</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">optimizer</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">epoch</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="n">acc1</span> <span class="o">=</span> <span class="n">validate</span><span class="p">(</span><span class="n">val_loader</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">criterion</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Epoch </span><span class="si">{</span><span class="n">epoch</span><span class="si">}</span><span class="s2"> completed. Validation Accuracy: </span><span class="si">{</span><span class="n">acc1</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%.&quot;</span><span class="p">)</span>

<span class="hll">    <span class="n">power_gauge_metric</span><span class="o">.</span><span class="n">end_window</span><span class="p">(</span><span class="s2">&quot;training_power&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>Metric observations are pushed to Prometheus every <code>update_period</code> seconds.</p>
<h3 id="querying-metrics-in-prometheus">Querying Metrics in Prometheus</h3>
<p>Once metrics are pushed to Prometheus, you can use PromQL to run simple analytics.</p>
<p><em>Energy for a specific window</em>
<div class="highlight"><pre><span></span><code><span class="nv">energy_monitor_gpu_energy_joules</span><span class="p">{</span><span class="nl">window</span><span class="o">=</span><span class="p">&quot;</span><span class="s">epoch_energy</span><span class="p">&quot;}</span>
</code></pre></div></p>
<p><em>Sum of energy for a specific window</em>
<div class="highlight"><pre><span></span><code><span class="k">sum</span><span class="o">(</span><span class="nv">energy_monitor_gpu_energy_joules</span><span class="o">)</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="nv">window</span><span class="o">)</span>
</code></pre></div></p>
<p><em>Sum of energy for specific GPU across all windows</em>
<div class="highlight"><pre><span></span><code><span class="k">sum</span><span class="o">(</span><span class="nv">energy_monitor_gpu_energy_joules</span><span class="p">{</span><span class="nl">index</span><span class="o">=</span><span class="p">&quot;</span><span class="s">0</span><span class="p">&quot;}</span><span class="o">)</span>
</code></pre></div></p>
<h2 id="cli-power-and-energy-monitor">CLI power and energy monitor</h2>
<p>The energy monitor measures the total energy consumed by the GPU during the lifetime of the monitor process.
It's a simple wrapper around <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a>.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>-m<span class="w"> </span>zeus.monitor<span class="w"> </span>energy
<span class="go">[2023-08-22 22:44:45,106] [ZeusMonitor](energy.py:157) Monitoring GPU [0, 1, 2, 3].</span>
<span class="go">[2023-08-22 22:44:46,210] [zeus.utils.framework](framework.py:38) PyTorch with CUDA support is available.</span>
<span class="go">[2023-08-22 22:44:46,760] [ZeusMonitor](energy.py:329) Measurement window &#39;zeus.monitor.energy&#39; started.</span>
<span class="go">^C[2023-08-22 22:44:50,205] [ZeusMonitor](energy.py:329) Measurement window &#39;zeus.monitor.energy&#39; ended.</span>
<span class="go">Total energy (J):</span>
<span class="go">Measurement(time=3.4480526447296143, energy={0: 224.2969999909401, 1: 232.83799999952316, 2: 233.3100000023842, 3: 234.53700000047684})</span>
</code></pre></div>
<p>The power monitor periodically prints out the GPU's power draw.
It's a simple wrapper around <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerMonitor&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor"><code>PowerMonitor</code></a>.</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>-m<span class="w"> </span>zeus.monitor<span class="w"> </span>power
<span class="go">[2023-08-22 22:39:59,787] [PowerMonitor](power.py:134) Monitoring power usage of GPUs [0, 1, 2, 3]</span>
<span class="go">2023-08-22 22:40:00.800576</span>
<span class="go">{&#39;GPU0&#39;: 66.176, &#39;GPU1&#39;: 68.792, &#39;GPU2&#39;: 66.898, &#39;GPU3&#39;: 67.53}</span>
<span class="go">2023-08-22 22:40:01.842590</span>
<span class="go">{&#39;GPU0&#39;: 66.078, &#39;GPU1&#39;: 68.595, &#39;GPU2&#39;: 66.996, &#39;GPU3&#39;: 67.138}</span>
<span class="go">2023-08-22 22:40:02.845734</span>
<span class="go">{&#39;GPU0&#39;: 66.078, &#39;GPU1&#39;: 68.693, &#39;GPU2&#39;: 66.898, &#39;GPU3&#39;: 67.236}</span>
<span class="go">2023-08-22 22:40:03.848818</span>
<span class="go">{&#39;GPU0&#39;: 66.177, &#39;GPU1&#39;: 68.675, &#39;GPU2&#39;: 67.094, &#39;GPU3&#39;: 66.926}</span>
<span class="go">^C</span>
<span class="go">Total time (s): 4.421529293060303</span>
<span class="go">Total energy (J):</span>
<span class="go">{&#39;GPU0&#39;: 198.52566362297537, &#39;GPU1&#39;: 206.22215216255188, &#39;GPU2&#39;: 201.08565518283845, &#39;GPU3&#39;: 201.79834523367884}</span>
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="repeated-execution-of-the-main-script-module-after-using-zeus-monitors">Repeated execution of the main script module after using Zeus monitors</h3>
<p>Zeus monitors (e.g., <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ZeusMonitor&lt;/span&gt;" href="../reference/monitor/energy/#zeus.monitor.energy.ZeusMonitor"><code>ZeusMonitor</code></a>, <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PowerMonitor&lt;/span&gt;" href="../reference/monitor/power/#zeus.monitor.power.PowerMonitor"><code>PowerMonitor</code></a>, <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TemperatureMonitor&lt;/span&gt;" href="../reference/monitor/temperature/#zeus.monitor.temperature.TemperatureMonitor"><code>TemperatureMonitor</code></a>, <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;CarbonEmissionMonitor&lt;/span&gt;" href="../reference/monitor/carbon/#zeus.monitor.carbon.CarbonEmissionMonitor"><code>CarbonEmissionMonitor</code></a>, <a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EnergyCostMonitor&lt;/span&gt;" href="../reference/monitor/price/#zeus.monitor.price.EnergyCostMonitor"><code>EnergyCostMonitor</code></a>) use the <code>spawn</code> start method for helper processes. Each spawned subprocess re-imports your <code>__main__</code> module (as <code>__mp_main__</code>), so any work done at import time, such as loading a model or instantiating a monitor, runs again in every process and can exhaust GPU/CPU memory. Keep heavy initialization under <code>if __name__ == "__main__":</code> or inside functions, so subprocess imports stay lightweight.</p>
<h3 id="cpu-energy-measurement-missing-or-permission-denied-intel-rapl">CPU energy measurement missing or permission denied (Intel RAPL)</h3>
<p>Reading CPU/DRAM energy via Intel RAPL requires root because of kernel restrictions. If you cannot run as root, disable CPU measurement with <code>cpu_indices=[]</code> or follow the steps in <a href="../getting_started/#system-privileges">System privileges</a> to grant access.</p>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026 Zeus team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/ml-energy/zeus" target="_blank" rel="noopener" title="Zeus GitHub repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://hub.docker.com/r/mlenergy/zeus" target="_blank" rel="noopener" title="Zeus Docker Hub registry" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://join.slack.com/t/zeus-ml/shared_invite/zt-36fl1m7qa-Ihky6FbfxLtobx40hMj3VA" target="_blank" rel="noopener" title="Zeus Slack workspace" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "search.suggest", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.tooltips", "announce.dismiss"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dd8806f2.min.js"></script>
      
        <script src="../assets/js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>